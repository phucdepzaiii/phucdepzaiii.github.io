<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BACCARAT SIDE BETS ANALYZER PRO - Hệ Thống Dự Đoán Độc Lập</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: #ffffff;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(255, 0, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(255, 255, 0, 0.05) 0%, transparent 50%);
            pointer-events: none;
            animation: backgroundFloat 20s ease-in-out infinite;
        }

        @keyframes backgroundFloat {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(-20px, -20px) rotate(120deg); }
            66% { transform: translate(20px, -10px) rotate(240deg); }
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '♠♥♦♣';
            position: absolute;
            top: -50px;
            right: -50px;
            font-size: 150px;
            opacity: 0.05;
            transform: rotate(15deg);
        }

        h1 {
            font-size: 3em;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #fda085 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
            text-shadow: 0 0 40px rgba(255, 255, 255, 0.3);
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1) saturate(1); }
            50% { filter: brightness(1.2) saturate(1.2); }
        }

        .subtitle {
            font-size: 1.3em;
            color: #ffd700;
            text-transform: uppercase;
            letter-spacing: 3px;
            font-weight: 600;
            animation: subtitlePulse 2s ease-in-out infinite;
        }

        @keyframes subtitlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Important Notice */
        .notice-box {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.2) 0%, rgba(255, 152, 0, 0.2) 100%);
            border: 2px solid #ffc107;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 25px;
            text-align: center;
            animation: noticeGlow 2s ease-in-out infinite;
        }

        @keyframes noticeGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 193, 7, 0.3); }
            50% { box-shadow: 0 0 30px rgba(255, 193, 7, 0.5); }
        }

        .notice-text {
            color: #ffd700;
            font-weight: bold;
            font-size: 1.1em;
        }

        /* Main Stats Dashboard */
        .main-dashboard {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
        }

        .dashboard-card.player-pair {
            border-color: #3498db;
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.2) 0%, rgba(52, 152, 219, 0.1) 100%);
        }

        .dashboard-card.banker-pair {
            border-color: #e74c3c;
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.2) 0%, rgba(231, 76, 60, 0.1) 100%);
        }

        .dashboard-card.tie {
            border-color: #f39c12;
            background: linear-gradient(135deg, rgba(243, 156, 18, 0.2) 0%, rgba(243, 156, 18, 0.1) 100%);
        }

        .card-icon {
            font-size: 3em;
            margin-bottom: 15px;
            display: inline-block;
            animation: iconFloat 3s ease-in-out infinite;
        }

        @keyframes iconFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .card-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .stat-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.85em;
            color: #aaa;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #fff;
        }

        .stat-value.highlight {
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            animation: valueGlow 2s ease-in-out infinite;
        }

        @keyframes valueGlow {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Independent Prediction Panel */
        .prediction-panel {
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.2) 0%, rgba(79, 70, 229, 0.2) 100%);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid #9333ea;
            position: relative;
        }

        .prediction-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .prediction-title {
            font-size: 1.8em;
            color: #a78bfa;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .ai-badge {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.6em;
            animation: badgePulse 2s ease-in-out infinite;
        }

        @keyframes badgePulse {
            0%, 100% { box-shadow: 0 0 20px rgba(240, 147, 251, 0.5); }
            50% { box-shadow: 0 0 40px rgba(240, 147, 251, 0.8); }
        }

        .predictions-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .prediction-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .prediction-card.hot {
            border-color: #ff6b6b;
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.3) 0%, rgba(255, 107, 107, 0.1) 100%);
            animation: hotPulse 1.5s ease-in-out infinite;
        }

        .prediction-card.very-hot {
            border-color: #ff0000;
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.4) 0%, rgba(255, 107, 107, 0.2) 100%);
            animation: veryHotPulse 1s ease-in-out infinite;
        }

        @keyframes hotPulse {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 107, 107, 0.5); }
            50% { box-shadow: 0 0 40px rgba(255, 107, 107, 0.8); }
        }

        @keyframes veryHotPulse {
            0%, 100% { 
                box-shadow: 0 0 30px rgba(255, 0, 0, 0.6);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 50px rgba(255, 0, 0, 0.9);
                transform: scale(1.02);
            }
        }

        .prediction-type {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .prediction-probability {
            font-size: 3em;
            font-weight: bold;
            margin: 15px 0;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .prediction-scale {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 0.8em;
            color: #888;
        }

        .confidence-meter {
            height: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
            position: relative;
        }

        .confidence-fill {
            height: 100%;
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .confidence-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .confidence-fill.low {
            background: linear-gradient(90deg, #95a5a6, #7f8c8d);
        }

        .confidence-fill.medium {
            background: linear-gradient(90deg, #3498db, #2980b9);
        }

        .confidence-fill.high {
            background: linear-gradient(90deg, #f39c12, #e67e22);
        }

        .confidence-fill.very-high {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
        }

        .confidence-fill.extreme {
            background: linear-gradient(90deg, #ff0000, #ff6b6b, #ff0000);
        }

        .next-prediction {
            margin-top: 10px;
            font-size: 1em;
            font-weight: bold;
        }

        .prediction-status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .status-cold {
            background: rgba(52, 152, 219, 0.2);
            color: #3498db;
        }

        .status-warm {
            background: rgba(243, 156, 18, 0.2);
            color: #f39c12;
        }

        .status-hot {
            background: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
        }

        .status-extreme {
            background: rgba(255, 0, 0, 0.3);
            color: #ff0000;
            font-weight: bold;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50%, 100% { opacity: 1; }
            25%, 75% { opacity: 0.5; }
        }

        /* Control Panel */
        .control-panel {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .control-title {
            font-size: 1.4em;
            margin-bottom: 20px;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-sections {
            display: grid;
            gap: 20px;
        }

        .control-section {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 15px;
        }

        .section-label {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #a78bfa;
        }

        .control-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
        }

        button {
            padding: 12px 15px;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            font-size: 0.95em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        button:hover::before {
            left: 100%;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff4757 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #feca57 0%, #ff9ff3 100%);
            color: white;
        }

        .btn-info {
            background: linear-gradient(135deg, #48dbfb 0%, #0abde3 100%);
            color: white;
        }

        .btn-special {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        /* History Display */
        .history-section {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .history-display {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            min-height: 80px;
            align-items: center;
        }

        .history-item {
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 0.95em;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
            position: relative;
        }

        .history-item:hover {
            transform: scale(1.1);
        }

        .history-item.player-pair {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
        }

        .history-item.banker-pair {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .history-item.tie {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: white;
        }

        .history-item.both-pair {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
        }

        .history-item.normal {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
            color: white;
        }

        .history-item.complex {
            background: linear-gradient(135deg, #e91e63 0%, #f06292 50%, #ba68c8 100%);
            color: white;
            box-shadow: 0 0 15px rgba(233, 30, 99, 0.5);
        }

        /* Pattern Recognition */
        .pattern-section {
            background: linear-gradient(135deg, rgba(46, 213, 115, 0.1) 0%, rgba(0, 184, 148, 0.1) 100%);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid #00b894;
        }

        .pattern-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .pattern-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .pattern-card.active {
            background: linear-gradient(135deg, rgba(46, 213, 115, 0.3) 0%, rgba(0, 184, 148, 0.3) 100%);
            border-color: #00b894;
            animation: patternActive 2s ease-in-out infinite;
        }

        @keyframes patternActive {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Alert System */
        .alert-system {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 350px;
        }

        .alert {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .main-dashboard {
                grid-template-columns: 1fr;
            }
            
            .predictions-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            
            .control-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>🎰 SIDE BETS ANALYZER PRO 🎰</h1>
            <div class="subtitle">Hệ Thống Dự Đoán Độc Lập - Mỗi Cược 0-100%</div>
        </div>

        <!-- Important Notice -->
        <div class="notice-box">
            <div class="notice-text">
                ⚠️ LƯU Ý: Mỗi loại cược (Đôi Con, Đôi Cái, Hòa) có xác suất ĐỘC LẬP từ 0-100% ⚠️
            </div>
        </div>

        <!-- Main Dashboard -->
        <div class="main-dashboard">
            <div class="dashboard-card player-pair">
                <div class="card-icon">👥</div>
                <div class="card-title">ĐÔI CON (Player Pair)</div>
                <div class="card-stats">
                    <div class="stat-item">
                        <div class="stat-label">Tần Suất</div>
                        <div class="stat-value" id="ppFrequency">0%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Lần Xuất Hiện</div>
                        <div class="stat-value" id="ppCount">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Cách Lần Cuối</div>
                        <div class="stat-value highlight" id="ppGap">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Trạng Thái</div>
                        <div class="stat-value" id="ppStatus">-</div>
                    </div>
                </div>
            </div>

            <div class="dashboard-card banker-pair">
                <div class="card-icon">👥</div>
                <div class="card-title">ĐÔI CÁI (Banker Pair)</div>
                <div class="card-stats">
                    <div class="stat-item">
                        <div class="stat-label">Tần Suất</div>
                        <div class="stat-value" id="bpFrequency">0%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Lần Xuất Hiện</div>
                        <div class="stat-value" id="bpCount">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Cách Lần Cuối</div>
                        <div class="stat-value highlight" id="bpGap">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Trạng Thái</div>
                        <div class="stat-value" id="bpStatus">-</div>
                    </div>
                </div>
            </div>

            <div class="dashboard-card tie">
                <div class="card-icon">🤝</div>
                <div class="card-title">HÒA (Tie)</div>
                <div class="card-stats">
                    <div class="stat-item">
                        <div class="stat-label">Tần Suất</div>
                        <div class="stat-value" id="tieFrequency">0%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Lần Xuất Hiện</div>
                        <div class="stat-value" id="tieCount">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Cách Lần Cuối</div>
                        <div class="stat-value highlight" id="tieGap">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Trạng Thái</div>
                        <div class="stat-value" id="tieStatus">-</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Independent AI Prediction Panel -->
        <div class="prediction-panel">
            <div class="prediction-header">
                <div class="prediction-title">
                    🔮 DỰ ĐOÁN AI ĐỘC LẬP - MỖI CƯỢC 0-100%
                    <span class="ai-badge">DEEP LEARNING</span>
                </div>
            </div>
            <div class="predictions-grid">
                <div class="prediction-card" id="ppPredCard">
                    <div class="prediction-type">👥 ĐÔI CON</div>
                    <div class="prediction-probability" id="ppProb">0%</div>
                    <div class="prediction-scale">
                        <span>0%</span>
                        <span>25%</span>
                        <span>50%</span>
                        <span>75%</span>
                        <span>100%</span>
                    </div>
                    <div class="confidence-meter">
                        <div class="confidence-fill" id="ppConfidence" style="width: 0%"></div>
                    </div>
                    <div class="next-prediction" id="ppNext">-</div>
                    <div class="prediction-status" id="ppStatusBadge">-</div>
                </div>

                <div class="prediction-card" id="bpPredCard">
                    <div class="prediction-type">👥 ĐÔI CÁI</div>
                    <div class="prediction-probability" id="bpProb">0%</div>
                    <div class="prediction-scale">
                        <span>0%</span>
                        <span>25%</span>
                        <span>50%</span>
                        <span>75%</span>
                        <span>100%</span>
                    </div>
                    <div class="confidence-meter">
                        <div class="confidence-fill" id="bpConfidence" style="width: 0%"></div>
                    </div>
                    <div class="next-prediction" id="bpNext">-</div>
                    <div class="prediction-status" id="bpStatusBadge">-</div>
                </div>

                <div class="prediction-card" id="tiePredCard">
                    <div class="prediction-type">🤝 HÒA</div>
                    <div class="prediction-probability" id="tieProb">0%</div>
                    <div class="prediction-scale">
                        <span>0%</span>
                        <span>20%</span>
                        <span>40%</span>
                        <span>60%</span>
                        <span>80%</span>
                    </div>
                    <div class="confidence-meter">
                        <div class="confidence-fill" id="tieConfidence" style="width: 0%"></div>
                    </div>
                    <div class="next-prediction" id="tieNext">-</div>
                    <div class="prediction-status" id="tieStatusBadge">-</div>
                </div>
            </div>
        </div>

        <!-- Control Panel with All Options -->
        <div class="control-panel">
            <div class="control-title">
                🎮 BẢNG ĐIỀU KHIỂN ĐẦY ĐỦ
            </div>
            
            <div class="control-sections">
                <!-- Single Results -->
                <div class="control-section">
                    <div class="section-label">📌 KẾT QUẢ ĐƠN</div>
                    <div class="control-buttons">
                        <button class="btn-primary" onclick="addResult('PP')">👥 Chỉ Đôi Con</button>
                        <button class="btn-primary" onclick="addResult('BP')">👥 Chỉ Đôi Cái</button>
                        <button class="btn-warning" onclick="addResult('T')">🤝 Chỉ Hòa</button>
                        <button class="btn-success" onclick="addResult('N')">✓ Bình Thường</button>
                    </div>
                </div>

                <!-- Combined Results -->
                <div class="control-section">
                    <div class="section-label">🎯 KẾT QUẢ KẾT HỢP</div>
                    <div class="control-buttons">
                        <button class="btn-special" onclick="addResult('T+PP')">🤝+👥 Hòa + Đôi Con</button>
                        <button class="btn-special" onclick="addResult('T+BP')">🤝+👥 Hòa + Đôi Cái</button>
                        <button class="btn-special" onclick="addResult('T+BOTH')">🤝+👥👥 Hòa + Cả 2 Đôi</button>
                        <button class="btn-info" onclick="addResult('BOTH')">👥👥 Cả 2 Đôi (Không Hòa)</button>
                    </div>
                </div>

                <!-- System Controls -->
                <div class="control-section">
                    <div class="section-label">⚙️ ĐIỀU KHIỂN HỆ THỐNG</div>
                    <div class="control-buttons">
                        <button class="btn-danger" onclick="undoLast()">↩️ Hoàn Tác</button>
                        <button class="btn-danger" onclick="clearAll()">🗑️ Xóa Tất Cả</button>
                        <button class="btn-success" onclick="generateDemo()">🎲 Demo AI (50 ván)</button>
                        <button class="btn-info" onclick="showStatistics()">📊 Thống Kê Chi Tiết</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Display -->
        <div class="history-section">
            <div class="control-title">
                📊 LỊCH SỬ KẾT QUẢ
            </div>
            <div class="history-display" id="historyDisplay">
                <div style="color: #888;">Chưa có dữ liệu...</div>
            </div>
        </div>

        <!-- Alert System -->
        <div class="alert-system" id="alertSystem"></div>
    </div>

    <script>
        // ===== INDEPENDENT SIDE BETS ANALYZER =====
        
        class IndependentSideBetsAnalyzer {
            constructor() {
                this.history = [];
                this.patterns = new Map();
                this.predictions = {
                    PP: { probability: 0, confidence: 0 },
                    BP: { probability: 0, confidence: 0 },
                    T: { probability: 0, confidence: 0 }
                };
                this.statistics = {
                    PP: { count: 0, lastSeen: -1, gaps: [], avgGap: 0 },
                    BP: { count: 0, lastSeen: -1, gaps: [], avgGap: 0 },
                    T: { count: 0, lastSeen: -1, gaps: [], avgGap: 0 }
                };
            }

            addResult(result) {
                const index = this.history.length;
                this.history.push(result);
                
                // Update statistics for each type independently
                if (result.includes('PP')) {
                    this.updateTypeStats('PP', index);
                }
                if (result.includes('BP') || result === 'BOTH') {
                    this.updateTypeStats('BP', index);
                }
                if (result.includes('T')) {
                    this.updateTypeStats('T', index);
                }
                
                this.analyzePatterns();
            }

            updateTypeStats(type, currentIndex) {
                const stats = this.statistics[type];
                
                // Calculate gap if not first occurrence
                if (stats.lastSeen !== -1) {
                    const gap = currentIndex - stats.lastSeen;
                    stats.gaps.push(gap);
                    
                    // Keep only last 20 gaps for moving average
                    if (stats.gaps.length > 20) {
                        stats.gaps.shift();
                    }
                    
                    // Calculate average gap
                    stats.avgGap = stats.gaps.reduce((a, b) => a + b, 0) / stats.gaps.length;
                }
                
                stats.count++;
                stats.lastSeen = currentIndex;
            }

            analyzePatterns() {
                // Analyze complex patterns for better prediction
                this.analyzeCyclePattern();
                this.analyzeClusterPattern();
                this.analyzeAlternatingPattern();
                this.analyzeProgressionPattern();
            }

            analyzeCyclePattern() {
                if (this.history.length < 10) return;
                
                // Check for repeating cycles in each type
                ['PP', 'BP', 'T'].forEach(type => {
                    const positions = [];
                    this.history.forEach((result, index) => {
                        if (result.includes(type)) {
                            positions.push(index);
                        }
                    });
                    
                    if (positions.length >= 3) {
                        const gaps = [];
                        for (let i = 1; i < positions.length; i++) {
                            gaps.push(positions[i] - positions[i-1]);
                        }
                        
                        // Check if gaps are consistent (cycle detected)
                        const avgGap = gaps.reduce((a, b) => a + b, 0) / gaps.length;
                        const variance = gaps.reduce((sum, gap) => 
                            sum + Math.pow(gap - avgGap, 2), 0) / gaps.length;
                        
                        if (variance < 3) {
                            this.patterns.set(`${type}_cycle`, {
                                avgGap: avgGap,
                                confidence: 1 - (variance / 3)
                            });
                        }
                    }
                });
            }

            analyzeClusterPattern() {
                // Check for clustering of each type
                const windowSize = 10;
                if (this.history.length < windowSize) return;
                
                const recent = this.history.slice(-windowSize);
                
                ['PP', 'BP', 'T'].forEach(type => {
                    const count = recent.filter(r => r.includes(type)).length;
                    const expectedRate = this.getExpectedRate(type);
                    const actualRate = count / windowSize;
                    
                    if (actualRate > expectedRate * 1.5) {
                        this.patterns.set(`${type}_cluster`, {
                            rate: actualRate,
                            confidence: Math.min(0.9, actualRate / expectedRate)
                        });
                    }
                });
            }

            analyzeAlternatingPattern() {
                if (this.history.length < 6) return;
                
                // Check for alternating patterns
                const recent = this.history.slice(-6);
                let ppAlternate = true;
                let bpAlternate = true;
                
                for (let i = 1; i < recent.length; i++) {
                    const prevHasPP = recent[i-1].includes('PP');
                    const currHasPP = recent[i].includes('PP');
                    const prevHasBP = recent[i-1].includes('BP') || recent[i-1] === 'BOTH';
                    const currHasBP = recent[i].includes('BP') || recent[i] === 'BOTH';
                    
                    if (prevHasPP === currHasPP) ppAlternate = false;
                    if (prevHasBP === currHasBP) bpAlternate = false;
                }
                
                if (ppAlternate) {
                    this.patterns.set('PP_alternating', { confidence: 0.8 });
                }
                if (bpAlternate) {
                    this.patterns.set('BP_alternating', { confidence: 0.8 });
                }
            }

            analyzeProgressionPattern() {
                // Fibonacci-like progression analysis
                ['PP', 'BP', 'T'].forEach(type => {
                    const positions = [];
                    this.history.forEach((result, index) => {
                        if (result.includes(type)) {
                            positions.push(index + 1); // 1-indexed
                        }
                    });
                    
                    if (positions.length >= 3) {
                        const fib = [1, 2, 3, 5, 8, 13, 21, 34, 55];
                        let matches = 0;
                        
                        positions.forEach(pos => {
                            if (fib.includes(pos)) matches++;
                        });
                        
                        if (matches / positions.length > 0.5) {
                            this.patterns.set(`${type}_fibonacci`, {
                                confidence: matches / positions.length
                            });
                        }
                    }
                });
            }

            getExpectedRate(type) {
                // Statistical expected rates in Baccarat
                switch(type) {
                    case 'PP': return 0.0745;  // ~7.45%
                    case 'BP': return 0.0745;  // ~7.45%
                    case 'T': return 0.095;    // ~9.5%
                    default: return 0.1;
                }
            }

            predict() {
                const total = this.history.length || 1;
                
                // Calculate independent probabilities for each type
                ['PP', 'BP', 'T'].forEach(type => {
                    let baseProbability = this.getExpectedRate(type) * 100;
                    let adjustedProbability = baseProbability;
                    let confidence = 50; // Base confidence
                    
                    const stats = this.statistics[type];
                    
                    // 1. Gap Analysis - Overdue increases probability
                    if (stats.lastSeen !== -1) {
                        const currentGap = total - stats.lastSeen - 1;
                        
                        if (stats.avgGap > 0) {
                            const gapRatio = currentGap / stats.avgGap;
                            
                            if (gapRatio > 1.5) {
                                // Very overdue
                                adjustedProbability *= (1 + gapRatio * 0.5);
                                confidence += 20;
                            } else if (gapRatio > 1) {
                                // Slightly overdue
                                adjustedProbability *= (1 + gapRatio * 0.3);
                                confidence += 10;
                            }
                        } else if (currentGap > 15) {
                            // No average yet but large gap
                            adjustedProbability *= 2;
                            confidence += 15;
                        }
                    }
                    
                    // 2. Frequency Analysis
                    const actualFrequency = stats.count / total;
                    const expectedFrequency = this.getExpectedRate(type);
                    const freqRatio = actualFrequency / expectedFrequency;
                    
                    if (freqRatio < 0.7) {
                        // Under-represented, likely to catch up
                        adjustedProbability *= 1.3;
                        confidence += 10;
                    } else if (freqRatio > 1.3) {
                        // Over-represented, might cool down
                        adjustedProbability *= 0.8;
                        confidence -= 10;
                    }
                    
                    // 3. Pattern Adjustments
                    if (this.patterns.has(`${type}_cycle`)) {
                        const cycle = this.patterns.get(`${type}_cycle`);
                        const currentGap = total - stats.lastSeen - 1;
                        
                        if (Math.abs(currentGap - cycle.avgGap) < 2) {
                            adjustedProbability *= 1.5;
                            confidence += cycle.confidence * 30;
                        }
                    }
                    
                    if (this.patterns.has(`${type}_cluster`)) {
                        const cluster = this.patterns.get(`${type}_cluster`);
                        adjustedProbability *= (1 + cluster.confidence * 0.3);
                        confidence += cluster.confidence * 20;
                    }
                    
                    if (this.patterns.has(`${type}_alternating`)) {
                        const lastHasType = this.history[this.history.length - 1].includes(type);
                        if (!lastHasType) {
                            adjustedProbability *= 1.4;
                            confidence += 15;
                        }
                    }
                    
                    // 4. Recent trend analysis
                    if (this.history.length >= 10) {
                        const recent10 = this.history.slice(-10);
                        const recentCount = recent10.filter(r => r.includes(type)).length;
                        const recentRate = recentCount / 10;
                        
                        if (recentRate === 0 && stats.count > 0) {
                            // None in last 10 but has appeared before
                            adjustedProbability *= 1.8;
                            confidence += 25;
                        }
                    }
                    
                    // 5. Special adjustments for Tie
                    if (type === 'T') {
                        // Ties tend to cluster
                        if (this.history.length > 0 && this.history[this.history.length - 1].includes('T')) {
                            adjustedProbability *= 1.2;
                            confidence += 10;
                        }
                        
                        // Long gap increases probability more for ties
                        const currentGap = total - stats.lastSeen - 1;
                        if (currentGap > 12) {
                            adjustedProbability *= 1.3;
                            confidence += 15;
                        }
                    }
                    
                    // Cap probabilities at reasonable limits
                    adjustedProbability = Math.min(100, Math.max(0, adjustedProbability));
                    confidence = Math.min(100, Math.max(0, confidence));
                    
                    this.predictions[type] = {
                        probability: adjustedProbability,
                        confidence: confidence
                    };
                });
                
                return this.predictions;
            }

            getStatistics() {
                const total = this.history.length || 1;
                const stats = {};
                
                ['PP', 'BP', 'T'].forEach(type => {
                    const typeStats = this.statistics[type];
                    const currentGap = typeStats.lastSeen >= 0 ? 
                        total - typeStats.lastSeen - 1 : '-';
                    
                    stats[type] = {
                        count: typeStats.count,
                        frequency: (typeStats.count / total * 100).toFixed(1),
                        gap: currentGap,
                        avgGap: typeStats.avgGap.toFixed(1),
                        expectedFreq: (this.getExpectedRate(type) * 100).toFixed(1)
                    };
                });
                
                return stats;
            }

            generateAlerts() {
                const alerts = [];
                const total = this.history.length;
                
                ['PP', 'BP', 'T'].forEach(type => {
                    const stats = this.statistics[type];
                    const pred = this.predictions[type];
                    
                    if (stats.lastSeen >= 0) {
                        const currentGap = total - stats.lastSeen - 1;
                        
                        // Alert for overdue
                        if (type === 'T' && currentGap > 12) {
                            alerts.push({
                                type: 'hot',
                                message: `🔥 HÒA đã ${currentGap} ván không xuất hiện!`,
                                priority: 3
                            });
                        } else if (currentGap > 18) {
                            const name = type === 'PP' ? 'Đôi Con' : 'Đôi Cái';
                            alerts.push({
                                type: 'hot',
                                message: `🔥 ${name} đã ${currentGap} ván không xuất hiện!`,
                                priority: 3
                            });
                        }
                    }
                    
                    // Alert for high probability
                    if (pred.probability > 50) {
                        const name = type === 'PP' ? 'Đôi Con' : 
                                   type === 'BP' ? 'Đôi Cái' : 'Hòa';
                        alerts.push({
                            type: 'prediction',
                            message: `⚡ ${name}: Xác suất ${pred.probability.toFixed(0)}%!`,
                            priority: 2
                        });
                    }
                });
                
                return alerts.sort((a, b) => b.priority - a.priority);
            }
        }

        // ===== GLOBAL VARIABLES =====
        let analyzer = new IndependentSideBetsAnalyzer();
        let gameHistory = [];

        // ===== UI FUNCTIONS =====
        function addResult(result) {
            gameHistory.push(result);
            analyzer.addResult(result);
            updateDisplay();
            analyzeAndPredict();
            showAlerts();
        }

        function undoLast() {
            if (gameHistory.length > 0) {
                gameHistory.pop();
                analyzer = new IndependentSideBetsAnalyzer();
                gameHistory.forEach(r => analyzer.addResult(r));
                updateDisplay();
                analyzeAndPredict();
            }
        }

        function clearAll() {
            if (confirm('Xóa toàn bộ dữ liệu?')) {
                gameHistory = [];
                analyzer = new IndependentSideBetsAnalyzer();
                updateDisplay();
                analyzeAndPredict();
            }
        }

        function generateDemo() {
            // Generate realistic demo data with all possible combinations
            const options = [
                'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', // 60% normal
                'PP', 'BP', 'T',                          // Single results
                'BOTH',                                    // Both pairs
                'T+PP', 'T+BP', 'T+BOTH'                 // Combined with tie
            ];
            
            for (let i = 0; i < 50; i++) {
                const result = options[Math.floor(Math.random() * options.length)];
                gameHistory.push(result);
                analyzer.addResult(result);
            }
            
            updateDisplay();
            analyzeAndPredict();
            showAlerts();
        }

        function showStatistics() {
            const stats = analyzer.getStatistics();
            let message = '📊 THỐNG KÊ CHI TIẾT\n\n';
            
            message += '👥 ĐÔI CON:\n';
            message += `  • Xuất hiện: ${stats.PP.count} lần (${stats.PP.frequency}%)\n`;
            message += `  • Kỳ vọng: ${stats.PP.expectedFreq}%\n`;
            message += `  • Cách lần cuối: ${stats.PP.gap} ván\n`;
            message += `  • Gap trung bình: ${stats.PP.avgGap} ván\n\n`;
            
            message += '👥 ĐÔI CÁI:\n';
            message += `  • Xuất hiện: ${stats.BP.count} lần (${stats.BP.frequency}%)\n`;
            message += `  • Kỳ vọng: ${stats.BP.expectedFreq}%\n`;
            message += `  • Cách lần cuối: ${stats.BP.gap} ván\n`;
            message += `  • Gap trung bình: ${stats.BP.avgGap} ván\n\n`;
            
            message += '🤝 HÒA:\n';
            message += `  • Xuất hiện: ${stats.T.count} lần (${stats.T.frequency}%)\n`;
            message += `  • Kỳ vọng: ${stats.T.expectedFreq}%\n`;
            message += `  • Cách lần cuối: ${stats.T.gap} ván\n`;
            message += `  • Gap trung bình: ${stats.T.avgGap} ván\n`;
            
            alert(message);
        }

        function updateDisplay() {
            // Update history display
            const historyDiv = document.getElementById('historyDisplay');
            if (gameHistory.length === 0) {
                historyDiv.innerHTML = '<div style="color: #888;">Chưa có dữ liệu...</div>';
            } else {
                historyDiv.innerHTML = gameHistory.map((result, index) => {
                    let className = '';
                    let icon = '';
                    let text = '';
                    
                    switch(result) {
                        case 'PP':
                            className = 'player-pair';
                            icon = '👥';
                            text = 'Đôi Con';
                            break;
                        case 'BP':
                            className = 'banker-pair';
                            icon = '👥';
                            text = 'Đôi Cái';
                            break;
                        case 'T':
                            className = 'tie';
                            icon = '🤝';
                            text = 'Hòa';
                            break;
                        case 'BOTH':
                            className = 'both-pair';
                            icon = '👥👥';
                            text = '2 Đôi';
                            break;
                        case 'T+PP':
                            className = 'complex';
                            icon = '🤝👥';
                            text = 'Hòa+ĐCon';
                            break;
                        case 'T+BP':
                            className = 'complex';
                            icon = '🤝👥';
                            text = 'Hòa+ĐCái';
                            break;
                        case 'T+BOTH':
                            className = 'complex';
                            icon = '🤝👥👥';
                            text = 'Hòa+2Đôi';
                            break;
                        case 'N':
                            className = 'normal';
                            icon = '✓';
                            text = 'Thường';
                            break;
                    }
                    
                    return `<div class="history-item ${className}">
                        <span>${icon}</span>
                        <span>${index + 1}. ${text}</span>
                    </div>`;
                }).join('');
            }

            // Update statistics
            updateStatistics();
        }

        function updateStatistics() {
            const stats = analyzer.getStatistics();
            
            // Update Player Pair stats
            document.getElementById('ppFrequency').textContent = stats.PP.frequency + '%';
            document.getElementById('ppCount').textContent = stats.PP.count;
            document.getElementById('ppGap').textContent = stats.PP.gap;
            
            let ppStatus = '❄️ Lạnh';
            if (stats.PP.gap !== '-') {
                if (stats.PP.gap > 18) ppStatus = '🔥🔥 RẤT NÓNG';
                else if (stats.PP.gap > 12) ppStatus = '🔥 Nóng';
                else if (stats.PP.gap > 8) ppStatus = '⚡ Ấm';
            }
            document.getElementById('ppStatus').textContent = ppStatus;
            
            // Update Banker Pair stats
            document.getElementById('bpFrequency').textContent = stats.BP.frequency + '%';
            document.getElementById('bpCount').textContent = stats.BP.count;
            document.getElementById('bpGap').textContent = stats.BP.gap;
            
            let bpStatus = '❄️ Lạnh';
            if (stats.BP.gap !== '-') {
                if (stats.BP.gap > 18) bpStatus = '🔥🔥 RẤT NÓNG';
                else if (stats.BP.gap > 12) bpStatus = '🔥 Nóng';
                else if (stats.BP.gap > 8) bpStatus = '⚡ Ấm';
            }
            document.getElementById('bpStatus').textContent = bpStatus;
            
            // Update Tie stats
            document.getElementById('tieFrequency').textContent = stats.T.frequency + '%';
            document.getElementById('tieCount').textContent = stats.T.count;
            document.getElementById('tieGap').textContent = stats.T.gap;
            
            let tieStatus = '❄️ Lạnh';
            if (stats.T.gap !== '-') {
                if (stats.T.gap > 12) tieStatus = '🔥🔥 RẤT NÓNG';
                else if (stats.T.gap > 8) tieStatus = '🔥 Nóng';
                else if (stats.T.gap > 5) tieStatus = '⚡ Ấm';
            }
            document.getElementById('tieStatus').textContent = tieStatus;
        }

        function analyzeAndPredict() {
            const predictions = analyzer.predict();
            
            // Update Player Pair prediction
            const ppProb = predictions.PP.probability;
            const ppConf = predictions.PP.confidence;
            
            document.getElementById('ppProb').textContent = ppProb.toFixed(1) + '%';
            
            const ppConfBar = document.getElementById('ppConfidence');
            ppConfBar.style.width = ppProb + '%';
            ppConfBar.className = 'confidence-fill';
            if (ppProb < 20) ppConfBar.classList.add('low');
            else if (ppProb < 40) ppConfBar.classList.add('medium');
            else if (ppProb < 60) ppConfBar.classList.add('high');
            else if (ppProb < 80) ppConfBar.classList.add('very-high');
            else ppConfBar.classList.add('extreme');
            
            document.getElementById('ppNext').textContent = 
                `Độ tin cậy: ${ppConf.toFixed(0)}%`;
            
            const ppStatusBadge = document.getElementById('ppStatusBadge');
            ppStatusBadge.className = 'prediction-status';
            if (ppProb < 20) {
                ppStatusBadge.textContent = 'Thấp';
                ppStatusBadge.classList.add('status-cold');
            } else if (ppProb < 40) {
                ppStatusBadge.textContent = 'Trung Bình';
                ppStatusBadge.classList.add('status-warm');
            } else if (ppProb < 70) {
                ppStatusBadge.textContent = 'Cao';
                ppStatusBadge.classList.add('status-hot');
            } else {
                ppStatusBadge.textContent = 'CỰC CAO!';
                ppStatusBadge.classList.add('status-extreme');
            }
            
            // Update card highlighting
            const ppCard = document.getElementById('ppPredCard');
            ppCard.className = 'prediction-card';
            if (ppProb > 50) ppCard.classList.add('hot');
            if (ppProb > 70) ppCard.classList.add('very-hot');
            
            // Update Banker Pair prediction
            const bpProb = predictions.BP.probability;
            const bpConf = predictions.BP.confidence;
            
            document.getElementById('bpProb').textContent = bpProb.toFixed(1) + '%';
            
            const bpConfBar = document.getElementById('bpConfidence');
            bpConfBar.style.width = bpProb + '%';
            bpConfBar.className = 'confidence-fill';
            if (bpProb < 20) bpConfBar.classList.add('low');
            else if (bpProb < 40) bpConfBar.classList.add('medium');
            else if (bpProb < 60) bpConfBar.classList.add('high');
            else if (bpProb < 80) bpConfBar.classList.add('very-high');
            else bpConfBar.classList.add('extreme');
            
            document.getElementById('bpNext').textContent = 
                `Độ tin cậy: ${bpConf.toFixed(0)}%`;
            
            const bpStatusBadge = document.getElementById('bpStatusBadge');
            bpStatusBadge.className = 'prediction-status';
            if (bpProb < 20) {
                bpStatusBadge.textContent = 'Thấp';
                bpStatusBadge.classList.add('status-cold');
            } else if (bpProb < 40) {
                bpStatusBadge.textContent = 'Trung Bình';
                bpStatusBadge.classList.add('status-warm');
            } else if (bpProb < 70) {
                bpStatusBadge.textContent = 'Cao';
                bpStatusBadge.classList.add('status-hot');
            } else {
                bpStatusBadge.textContent = 'CỰC CAO!';
                bpStatusBadge.classList.add('status-extreme');
            }
            
            const bpCard = document.getElementById('bpPredCard');
            bpCard.className = 'prediction-card';
            if (bpProb > 50) bpCard.classList.add('hot');
            if (bpProb > 70) bpCard.classList.add('very-hot');
            
            // Update Tie prediction
            const tieProb = predictions.T.probability;
            const tieConf = predictions.T.confidence;
            
            document.getElementById('tieProb').textContent = tieProb.toFixed(1) + '%';
            
            const tieConfBar = document.getElementById('tieConfidence');
            tieConfBar.style.width = tieProb + '%';
            tieConfBar.className = 'confidence-fill';
            if (tieProb < 15) tieConfBar.classList.add('low');
            else if (tieProb < 30) tieConfBar.classList.add('medium');
            else if (tieProb < 45) tieConfBar.classList.add('high');
            else if (tieProb < 60) tieConfBar.classList.add('very-high');
            else tieConfBar.classList.add('extreme');
            
            document.getElementById('tieNext').textContent = 
                `Độ tin cậy: ${tieConf.toFixed(0)}%`;
            
            const tieStatusBadge = document.getElementById('tieStatusBadge');
            tieStatusBadge.className = 'prediction-status';
            if (tieProb < 15) {
                tieStatusBadge.textContent = 'Thấp';
                tieStatusBadge.classList.add('status-cold');
            } else if (tieProb < 30) {
                tieStatusBadge.textContent = 'Trung Bình';
                tieStatusBadge.classList.add('status-warm');
            } else if (tieProb < 50) {
                tieStatusBadge.textContent = 'Cao';
                tieStatusBadge.classList.add('status-hot');
            } else {
                tieStatusBadge.textContent = 'CỰC CAO!';
                tieStatusBadge.classList.add('status-extreme');
            }
            
            const tieCard = document.getElementById('tiePredCard');
            tieCard.className = 'prediction-card';
            if (tieProb > 30) tieCard.classList.add('hot');
            if (tieProb > 50) tieCard.classList.add('very-hot');
        }

        function showAlerts() {
            const alerts = analyzer.generateAlerts();
            const alertSystem = document.getElementById('alertSystem');
            
            alerts.slice(0, 3).forEach(alert => {
                const alertDiv = document.createElement('div');
                alertDiv.className = 'alert';
                alertDiv.innerHTML = alert.message;
                alertSystem.appendChild(alertDiv);
                
                setTimeout(() => {
                    alertDiv.remove();
                }, 5000);
            });
        }

        // Initialize display
        updateDisplay();
        analyzeAndPredict();
    </script>
</body>
</html>
